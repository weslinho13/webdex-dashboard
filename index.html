<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>WebdEX Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0f172a;
      color: #f8fafc;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #1e293b;
      padding: 20px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      color: #22d3ee;
    }
    .container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      padding: 20px;
    }
    .card {
      background-color: #1e293b;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .btn {
      padding: 10px 15px;
      background-color: #0ea5e9;
      border: none;
      color: white;
      cursor: pointer;
      border-radius: 8px;
      margin-top: 10px;
    }
    input {
      padding: 8px;
      border-radius: 6px;
      border: none;
      width: 100%;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <header>WebdEX Manager Dashboard</header>
  <div class="container">
    <div class="card">
      <h3>Conexão</h3>
      <button class="btn" onclick="connectWallet()">Conectar MetaMask</button>
      <p id="walletAddress">Carteira: não conectada</p>
    </div>
    <div class="card">
      <h3>Saldo de Gás</h3>
      <button class="btn" onclick="getGasBalance()">Ver Saldo</button>
      <p id="gasBalance">-</p>
    </div>
    <div class="card">
      <h3>Adicionar Gás</h3>
      <input type="number" id="addGasAmount" placeholder="Quantidade em MATIC" />
      <button class="btn" onclick="addGas()">Adicionar</button>
    </div>
    <div class="card">
      <h3>Remover Gás</h3>
      <input type="number" id="removeGasAmount" placeholder="Quantidade em MATIC" />
      <button class="btn" onclick="removeGas()">Remover</button>
    </div>
  </div>

<script>
const managerAddress = "0x9b4314878f58C3Ca53EC0087AcC8c9A30DF773E0";
const managerABI = [ /* COLE AQUI SUA ABI COMPLETA */ ];

let web3;
let account;
let contract;

async function connectWallet() {
  if (window.ethereum) {
    web3 = new Web3(window.ethereum);
    await ethereum.request({ method: 'eth_requestAccounts' });
    const accounts = await web3.eth.getAccounts();
    account = accounts[0];
    document.getElementById("walletAddress").innerText = "Carteira: " + account;
    contract = new web3.eth.Contract(managerABI, managerAddress);
  } else {
    alert("MetaMask não detectado!");
  }
}

async function getGasBalance() {
  if (!contract) return alert("Conecte a carteira primeiro.");
  try {
    const balance = await contract.methods.balanceGas(account).call();
    document.getElementById("gasBalance").innerText = web3.utils.fromWei(balance) + " MATIC";
  } catch (e) {
    console.error(e);
    alert("Erro ao buscar saldo de gás.");
  }
}

async function addGas() {
  const amount = document.getElementById("addGasAmount").value;
  if (!amount) return alert("Informe a quantidade.");
  try {
    await web3.eth.sendTransaction({
      from: account,
      to: managerAddress,
      value: web3.utils.toWei(amount, "ether")
    });
    alert("Gás adicionado com sucesso.");
  } catch (e) {
    console.error(e);
    alert("Erro ao adicionar gás.");
  }
}

async function removeGas() {
  const amount = document.getElementById("removeGasAmount").value;
  if (!contract || !amount) return;
  try {
    await contract.methods.removeGas(web3.utils.toWei(amount, "ether")).send({ from: account });
    alert("Gás removido.");
  } catch (e) {
    console.error(e);
    alert("Erro ao remover gás.");
  }
}
</script>
</body>
</html>

  
